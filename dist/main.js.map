{"version":3,"sources":["webpack:///webpack/bootstrap dac5f543874eee2077ae","webpack:///./src/index.js"],"names":["c","console","log","dateValue","document","getElementById","nameValue","timeValue","makeDate","dateResult","info","checkboxTime","interval","makeInfoMessage","message","delay","innerHTML","setTimeout","onchange","event","target","checked","classList","add","remove","checkContent","args","forEach","arg","oninput","value","length","disabled","timeFormatter","date","ms","Number","delta","Math","abs","years","floor","months","days","hours","minutes","seconds","Event","name","time","_id","counter","newDate","Date","_counter","getEventFromStorage","setToStorage","key","arrWithItems","localStorage","setItem","JSON","stringify","addToStorage","item","parse","getItem","renderEventTemplate","nameEvent","eventDifference","isPresent","renderEvents","arr","arrForTeg","idx","push","createElement","itemDifference","appendChild","setInterval","addNewEventInRender","textContent","clearInterval","deleteEventFromRender","id","filter","onclick"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;;;;;;;;;;;;;;;;AC7DA,IAAMA,IAAIC,QAAQC,GAAlB;;AAEA,IAAMC,YAAYC,SAASC,cAAT,CAAwB,YAAxB,CAAlB,C,CAAyD;AACzD,IAAMC,YAAYF,SAASC,cAAT,CAAwB,YAAxB,CAAlB,C,CAAyD;AACzD,IAAME,YAAYH,SAASC,cAAT,CAAwB,YAAxB,CAAlB,C,CAAyD;AACzD,IAAMG,WAAWJ,SAASC,cAAT,CAAwB,WAAxB,CAAjB,C,CAAuD;AACvD,IAAMI,aAAaL,SAASC,cAAT,CAAwB,aAAxB,CAAnB,C,CAA2D;AAC3D,IAAMK,OAAON,SAASC,cAAT,CAAwB,MAAxB,CAAb,C,CAA8C;AAC9C,IAAMM,eAAeP,SAASC,cAAT,CAAwB,eAAxB,CAArB,C,CAA+D;;AAE/D,IAAIO,iBAAJ,C,CAAc;;AAEd;AACA,IAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,OAAD,EAAUC,KAAV,EAAoB;AACxCL,SAAKM,SAAL,kBAA8BF,OAA9B;AACAG,eAAW;AAAA,eAAMP,KAAKM,SAAL,GAAiB,IAAvB;AAAA,KAAX,EAAwCD,KAAxC;AACH,CAHD;AAIA;AACAJ,aAAaO,QAAb,GAAwB,UAACC,KAAD,EAAW;AAC/BA,UAAMC,MAAN,CAAaC,OAAb,KAAyB,KAAzB,GAAiCd,UAAUe,SAAV,CAAoBC,GAApB,CAAwB,QAAxB,CAAjC,GAAqEhB,UAAUe,SAAV,CAAoBE,MAApB,CAA2B,QAA3B,CAArE;AACH,CAFD;AAGA;AACA,IAAMC,eAAe,SAAfA,YAAe,GAAa;AAAA,sCAATC,IAAS;AAATA,YAAS;AAAA;;AAC9BA,SAAKC,OAAL,CAAa,eAAO;AAChBC,YAAIC,OAAJ,GAAc,YAAM;AAChB,gBAAI1B,UAAU2B,KAAV,CAAgBC,MAAhB,IAA0BzB,UAAUwB,KAAV,CAAgBC,MAA9C,EAAsD;AAClDvB,yBAASwB,QAAT,GAAoB,KAApB;AACH;AACJ,SAJD;AAKH,KAND;AAOH,CARD;AASAP,aAAatB,SAAb,EAAwBG,SAAxB;;AAEA,IAAM2B,gBAAgB,SAAhBA,aAAgB,CAACC,IAAD,EAAU;AAC5B,QAAMC,KAAKC,OAAOF,IAAP,CAAX;AACA,QAAIG,QAAQC,KAAKC,GAAL,CAASL,IAAT,IAAiB,IAA7B,CAF4B,CAEO;AACnC,QAAMM,QAAQF,KAAKG,KAAL,CAAWJ,QAAQ,QAAnB,CAAd,CAH4B,CAGgB;AAC5CA,aAASG,QAAQ,QAAjB,CAJ4B,CAID;AAC3B,QAAME,SAASJ,KAAKG,KAAL,CAAWJ,QAAQ,OAAnB,CAAf,CAL4B,CAKgB;AAC5CA,aAASK,SAAS,OAAlB;AACA,QAAMC,OAAOL,KAAKG,KAAL,CAAWJ,QAAQ,KAAnB,CAAb;AACAA,aAASM,OAAO,KAAhB;AACA,QAAMC,QAAQN,KAAKG,KAAL,CAAWJ,QAAQ,IAAnB,IAA2B,EAAzC;AACAA,aAASO,QAAQ,IAAjB;AACA,QAAMC,UAAUP,KAAKG,KAAL,CAAWJ,QAAQ,EAAnB,IAAyB,EAAzC;AACAA,aAASQ,UAAU,EAAnB;AACA,QAAMC,UAAUR,KAAKG,KAAL,CAAWJ,QAAQ,EAAnB,CAAhB;AACA,WAAO;AACHG,eAAOA,KADJ;AAEHE,gBAAQA,MAFL;AAGHC,cAAMA,IAHH;AAIHC,eAAOA,KAJJ;AAKHC,iBAASA,OALN;AAMHC,iBAASA,OANN;AAOHX,YAAIA;AAPD,KAAP;AASH,CAvBD;;IAyBMY,K;AACF,mBAAYC,IAAZ,EAAkBd,IAAlB,EAAwBe,IAAxB,EAA8B;AAAA;;AAC1B,aAAKC,GAAL,GAAWH,MAAMI,OAAjB;AACA,aAAKH,IAAL,GAAYA,IAAZ;AACA,aAAKI,OAAL,GAAe,IAAIC,IAAJ,CAAYnB,IAAZ,UAAoBe,QAAQ,UAA5B,EAAf;AACH;;;;4BAEkB;AAAE;AACrBF,kBAAMO,QAAN,GAAiBC,oBAAoB,QAApB,IAAgCA,oBAAoB,QAApB,EAA8BxB,MAA9B,GAAuC,CAAvE,GAA2E,CAA5F;AACA,mBAAOgB,MAAMO,QAAb;AACD;;;;;;AAGH,IAAME,eAAe,SAAfA,YAAe,CAACC,GAAD,EAAMC,YAAN;AAAA,WAAuBC,aAAaC,OAAb,CAAqBH,GAArB,EAA0BI,KAAKC,SAAL,CAAeJ,YAAf,CAA1B,CAAvB;AAAA,CAArB;AACA,IAAMK,eAAe,SAAfA,YAAe,CAACN,GAAD,EAAMO,IAAN;AAAA,WAAeR,aAAaC,GAAb,+BAAsBF,oBAAoBE,GAApB,CAAtB,IAAgDO,IAAhD,GAAf;AAAA,CAArB;AACA,IAAMT,sBAAsB,SAAtBA,mBAAsB,CAACE,GAAD;AAAA,WAASI,KAAKI,KAAL,CAAWN,aAAaO,OAAb,CAAqBT,GAArB,CAAX,CAAT;AAAA,CAA5B;AACA;AACA;AACA,IAAIE,aAAa5B,MAAb,KAAwB,CAA5B,EAA+B;AAC7ByB,iBAAa,QAAb,EAAuB,CAAC,IAAIT,KAAJ,CAAU,WAAV,EAAuB,YAAvB,CAAD,CAAvB;AACAgB,iBAAa,QAAb,EAAuB,IAAIhB,KAAJ,CAAU,aAAV,EAAyB,YAAzB,EAAuC,UAAvC,CAAvB;AACAgB,iBAAa,QAAb,EAAuB,IAAIhB,KAAJ,CAAU,aAAV,EAAyB,YAAzB,EAAuC,UAAvC,CAAvB;AACD;;AAED,IAAMoB,sBAAsB,SAAtBA,mBAAsB,CAACC,SAAD,EAAYC,eAAZ,EAA6BC,SAA7B,EAA2C;AACnE,uEACgBF,SADhB,kBAEGE,YAAY,WAAZ,GAA0B,mBAF7B,qBAGAD,gBAAgB7B,KAAhB,KAA0B,CAA1B,GAA8B6B,gBAAgB7B,KAAhB,GAAwB,OAAtD,GAAgE,EAHhE,gBAIA6B,gBAAgB3B,MAAhB,KAA2B,CAA3B,GAA+B2B,gBAAgB3B,MAAhB,GAAyB,WAAxD,GAAsE,EAJtE,eAKA2B,gBAAgB1B,IAAhB,KAAyB,CAAzB,GAA6B0B,gBAAgB1B,IAAhB,GAAuB,QAApD,GAA+D,EAL/D,eAMA0B,gBAAgBzB,KAAhB,KAA0B,CAA1B,GAA8ByB,gBAAgBzB,KAAhB,GAAwB,SAAtD,GAAkE,EANlE,eAOAyB,gBAAgBxB,OAAhB,GAA0B,SAP1B,eAQAwB,gBAAgBvB,OAAhB,GAA0B,SAR1B;AAUH,CAXD;AAYA,IAAMyB,eAAe,SAAfA,YAAe,CAACC,GAAD,EAAS;AAC1BvE,YAAQC,GAAR,CAAYsE,GAAZ;AACA,QAAIA,IAAIzC,MAAJ,KAAe,CAAnB,EAAsBlB,gBAAgB,qBAAhB,EAAuC,KAAvC,EAAtB,KACK;AACD,YAAI4D,YAAY,EAAhB,CADC,CACmB;;AAEpBD,YAAI7C,OAAJ,CAAY,UAACR,KAAD,EAAQuD,GAAR,EAAgB;AACxBD,sBAAUE,IAAV,CAAevE,SAASwE,aAAT,CAAuB,GAAvB,CAAf,EADwB,CACqB;AAC7C,gBAAIC,iBAAiB5C,cAAc,IAAIoB,IAAJ,CAASlC,MAAMiC,OAAf,IAA0B,IAAIC,IAAJ,EAAxC,CAArB,CAFwB,CAEkD;;AAE1E;AACA,gBAAIwB,eAAe1C,EAAf,GAAoB,CAAxB,EAA2BsC,UAAUC,GAAV,EAAe1D,SAAf,GAA2BmD,oBAAoBhD,MAAM6B,IAA1B,EAAgC6B,cAAhC,EAAgD,IAAhD,CAA3B;AAC3B;AACA,gBAAIA,eAAe1C,EAAf,IAAqB,CAAzB,EAA4BsC,UAAUC,GAAV,EAAe1D,SAAf,GAA2BmD,oBAAoBhD,MAAM6B,IAA1B,EAAgC6B,cAAhC,EAAgD,KAAhD,CAA3B;;AAE5BpE,uBAAWqE,WAAX,CAAuBL,UAAUC,GAAV,CAAvB,EATwB,CASgB;AAC3C,SAVD;AAWA;AACA9D,mBAAWmE,YACP,YAAM;AACFP,gBAAI7C,OAAJ,CAAY,UAACR,KAAD,EAAQuD,GAAR,EAAgB;AACxB,oBAAIG,iBAAiB5C,cAAe,IAAIoB,IAAJ,CAASlC,MAAMiC,OAAf,IAA0B,IAA3B,GAAmC,IAAIC,IAAJ,EAAjD,CAArB;;AAEA;AACA,oBAAIwB,eAAe1C,EAAf,GAAoB,CAAxB,EAA2BsC,UAAUC,GAAV,EAAe1D,SAAf,GAA2BmD,oBAAoBhD,MAAM6B,IAA1B,EAAgC6B,cAAhC,EAAgD,IAAhD,CAA3B;AAC3B;AACA,oBAAIA,eAAe1C,EAAf,IAAqB,CAAzB,EAA4BsC,UAAUC,GAAV,EAAe1D,SAAf,GAA2BmD,oBAAoBhD,MAAM6B,IAA1B,EAAgC6B,cAAhC,EAAgD,KAAhD,CAA3B;AAC/B,aAPD;AAQA;AACH,SAXM,EAWJ,IAXI,CAAX;AAaH;AACJ,CAhCD;AAiCA,IAAMG,sBAAsB,SAAtBA,mBAAsB,CAAC7D,KAAD,EAAW;AACnC4C,iBAAa,QAAb,EAAuB5C,KAAvB;AACAV,eAAWwE,WAAX,GAAyB,IAAzB;AACAC,kBAActE,QAAd;AACA2D,iBAAahB,oBAAoB,QAApB,CAAb,EAJmC,CAIU;AAChD,CALD;AAMAgB,aAAahB,oBAAoB,QAApB,CAAb;;AAEA,IAAM4B,wBAAwB,SAAxBA,qBAAwB,CAAC1B,GAAD,EAAM2B,EAAN,EAAa;AACvC5B,iBACIC,GADJ,EAEIF,oBAAoBE,GAApB,EAAyB4B,MAAzB,CAAgC;AAAA,eAAQrB,KAAKd,GAAL,KAAakC,EAArB;AAAA,KAAhC,CAFJ;AAIA3E,eAAWwE,WAAX,GAAyB,IAAzB;AACAC,kBAActE,QAAd;AACA2D,iBAAahB,oBAAoBE,GAApB,CAAb;AACH,CARD;AASA;;AAEAjD,SAAS8E,OAAT,GAAmB,YAAM;AACrBN,wBAAoB,IAAIjC,KAAJ,CAAUzC,UAAUwB,KAApB,EAA2B3B,UAAU2B,KAArC,EAA4CvB,UAAUuB,KAAtD,CAApB;AACA3B,cAAU2B,KAAV,GAAkB,EAAlB;AACAxB,cAAUwB,KAAV,GAAkB,EAAlB;AACAvB,cAAUuB,KAAV,GAAkB,EAAlB;AACAtB,aAASwB,QAAT,GAAoB,IAApB;AACH,CAND,C","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dac5f543874eee2077ae","const c = console.log;\r\n\r\nconst dateValue = document.getElementById('date-value'); //поле ввода даты события\r\nconst nameValue = document.getElementById('name-value'); //поле ввода имени события\r\nconst timeValue = document.getElementById('input-time'); //поле ввода времени\r\nconst makeDate = document.getElementById('take-date'); //кнопка Пуск\r\nconst dateResult = document.getElementById('date-result'); //сюда добавляем таймеры\r\nconst info = document.getElementById('info'); //место, куда можно выводить информационные сообщения\r\nconst checkboxTime = document.getElementById('checkbox-time'); //чекбокс, отображения\\скрытия времени\r\n\r\nlet interval; //переменная в общем поле видимости, которая позволит очистить интервал \r\n\r\n//делает информационное сообщение на заданое кол-во мс\r\nconst makeInfoMessage = (message, delay) => {\r\n    info.innerHTML += `<div><b> ${message} </b></div>`;\r\n    setTimeout(() => info.innerHTML = null, delay)\r\n};\r\n//происходит при нажатии на чекбокс \"показать время\". скрывает и показывает поле ввода времени\r\ncheckboxTime.onchange = (event) => {\r\n    event.target.checked === false ? timeValue.classList.add('hidden') : timeValue.classList.remove('hidden');\r\n};\r\n//функция для разблокировки кнопки Пуск, когда ввели Дату и Имя события\r\nconst checkContent = (...args) => {\r\n    args.forEach(arg => {\r\n        arg.oninput = () => {\r\n            if (dateValue.value.length && nameValue.value.length) {\r\n                makeDate.disabled = false;\r\n            }\r\n        }\r\n    })\r\n};\r\ncheckContent(dateValue, nameValue);\r\n\r\nconst timeFormatter = (date) => {\r\n    const ms = Number(date);\r\n    let delta = Math.abs(date) / 1000; //переводит дату в секунды\r\n    const years = Math.floor(delta / 31536000); //сколько лет влазит в это кол-во секунд\r\n    delta -= years * 31536000; //получаем остаток секунд, вычитая из него кол-во милисекунд в целых годах\r\n    const months = Math.floor(delta / 2592000); //сколько месяцев влазит в остаток милисекунд после подсчёта Года\r\n    delta -= months * 2592000;\r\n    const days = Math.floor(delta / 86400);\r\n    delta -= days * 86400;\r\n    const hours = Math.floor(delta / 3600) % 24;\r\n    delta -= hours * 3600;\r\n    const minutes = Math.floor(delta / 60) % 60;\r\n    delta -= minutes * 60;\r\n    const seconds = Math.floor(delta % 60);\r\n    return {\r\n        years: years,\r\n        months: months,\r\n        days: days,\r\n        hours: hours,\r\n        minutes: minutes,\r\n        seconds: seconds,\r\n        ms: ms\r\n    }\r\n};\r\n\r\nclass Event {\r\n    constructor(name, date, time) {\r\n        this._id = Event.counter;\r\n        this.name = name;\r\n        this.newDate = new Date(`${date}T${time || '00:00:00'}`)\r\n    }\r\n\r\n  static get counter() { //счётчик для id\r\n    Event._counter = getEventFromStorage('events') ? getEventFromStorage('events').length + 1 : 1;\r\n    return Event._counter;\r\n  }\r\n}\r\n\r\nconst setToStorage = (key, arrWithItems) => localStorage.setItem(key, JSON.stringify(arrWithItems));\r\nconst addToStorage = (key, item) => setToStorage(key, [...getEventFromStorage(key), item]);\r\nconst getEventFromStorage = (key) => JSON.parse(localStorage.getItem(key));\r\n// localStorage.clear()\r\n// если localstorage пуст (запустили первый раз. то внесём в него 3 события)\r\nif (localStorage.length === 0) {\r\n  setToStorage('events', [new Event('Новый год', '2020-12-31')]);\r\n  addToStorage('events', new Event('Начало летa', '2020-06-01', '11:30:30'));\r\n  addToStorage('events', new Event('8 мая 11:30', '2020-05-08', '11:30:30'));\r\n}\r\n\r\nconst renderEventTemplate = (nameEvent, eventDifference, isPresent) => {\r\n    return `\r\n  <b>Событие:</b> ${nameEvent}. \r\n  <b>${isPresent ? ' До него:' : 'C тех пор прошло:'}</b>   \r\n  ${eventDifference.years !== 0 ? eventDifference.years + ' лет,' : ''}  \r\n  ${eventDifference.months !== 0 ? eventDifference.months + ' месяцев,' : ''} \r\n  ${eventDifference.days !== 0 ? eventDifference.days + ' дней,' : ''} \r\n  ${eventDifference.hours !== 0 ? eventDifference.hours + ' часов,' : ''} \r\n  ${eventDifference.minutes + ' минут,'} \r\n  ${eventDifference.seconds + ' секунд'} \r\n  `;\r\n};\r\nconst renderEvents = (arr) => {\r\n    console.log(arr);\r\n    if (arr.length === 0) makeInfoMessage('Список событий пуст', 60000)\r\n    else {\r\n        let arrForTeg = []; //массив, где будут лежать результаты createElement\r\n\r\n        arr.forEach((event, idx) => {\r\n            arrForTeg.push(document.createElement('p')); //создаём для каждого элемента массива тэг\r\n            let itemDifference = timeFormatter(new Date(event.newDate) - new Date()); //каждую секунду пересчитывается разница во времени между заданной датой и нынешней\r\n\r\n            //для каждого созданного тега делаем текстовое содержимое\r\n            if (itemDifference.ms > 0) arrForTeg[idx].innerHTML = renderEventTemplate(event.name, itemDifference, true);\r\n            //если таймер кончился\r\n            if (itemDifference.ms <= 0) arrForTeg[idx].innerHTML = renderEventTemplate(event.name, itemDifference, false);\r\n\r\n            dateResult.appendChild(arrForTeg[idx]); //вставляем на страницу\r\n        });\r\n        //каждую секунду для каждого эл-та понижаем кол-во милисекунд на 1000\r\n        interval = setInterval(\r\n            () => {\r\n                arr.forEach((event, idx) => {\r\n                    let itemDifference = timeFormatter((new Date(event.newDate) - 1000) - new Date());\r\n\r\n                    // event.difference = countDownTimer(event.difference.ms); //вычитаем 1000 милисекунд и возвращаем новое отформатированное значение\r\n                    if (itemDifference.ms > 0) arrForTeg[idx].innerHTML = renderEventTemplate(event.name, itemDifference, true);\r\n                    //если таймер кончился\r\n                    if (itemDifference.ms <= 0) arrForTeg[idx].innerHTML = renderEventTemplate(event.name, itemDifference, false);\r\n                })\r\n                // console.log('интервал сработал')\r\n            }, 1000\r\n        )\r\n    }\r\n};\r\nconst addNewEventInRender = (event) => {\r\n    addToStorage('events', event)\r\n    dateResult.textContent = null;\r\n    clearInterval(interval);\r\n    renderEvents(getEventFromStorage('events')); //снова отрендерили это всё\r\n};\r\nrenderEvents(getEventFromStorage('events'));\r\n\r\nconst deleteEventFromRender = (key, id) => {\r\n    setToStorage(\r\n        key,\r\n        getEventFromStorage(key).filter(item => item._id !== id)\r\n    );\r\n    dateResult.textContent = null;\r\n    clearInterval(interval);\r\n    renderEvents(getEventFromStorage(key));\r\n};\r\n// deleteEventFromRender('events',3);\r\n\r\nmakeDate.onclick = () => {\r\n    addNewEventInRender(new Event(nameValue.value, dateValue.value, timeValue.value));\r\n    dateValue.value = '';\r\n    nameValue.value = '';\r\n    timeValue.value = '';\r\n    makeDate.disabled = true;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}